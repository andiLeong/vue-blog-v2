import{B as g}from"./BaseInput.b1a9acf6.js";import{u as y,x as c,a as r,d as n,b as e,h as p,F as b,e as x,i as l,p as v,f as k,t as m,c as w,k as V,o as a}from"./vendor.47665e28.js";import{N as B,T as L}from"./Tiptap.4f367964.js";import{_ as N}from"./index.5555246c.js";const C={props:["slug"],components:{BaseInput:g,Notification:B,Tiptap:L},data(){return{post:"",errors:{},isLoading:!1,submitted:!1,isAdmin:!1,store:y()}},created(){this.fetch(this.slug)},methods:{fetch(o){c.get(`/api/posts/${o}`).then(s=>{this.post=s.data}).catch(s=>{alert(s),console.log(s)})},update(){this.isLoading=!0,c.patch(`/api/posts/${this.slug}`,this.post).then(o=>{this.isLoading=!1,this.submitted=!0,console.log(o.data)}).catch(o=>{this.isLoading=!1;let s=o.response.status;if(s=="401")return this.store.dispatch("logout"),router.push({name:"login"});if(s=="403")return alert(o.response.data.message);this.errors=o.response.data.errors,console.log(o.response.data.errors)})}}},j={class:"space-y-8 divide-y divide-gray-200"},I={key:0},T={class:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6"},U={class:"sm:col-span-4"},z={class:"sm:col-span-4"},A=e("label",{for:"about",class:"block text-sm font-medium text-gray-700 dark:text-white"}," About ",-1),S={class:"mt-1"},E={key:1},F={class:"pt-5"},H={class:"mb-2"},M={class:"flex justify-start"},Y=["disabled"],D={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},W=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),q=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),G=[W,q];function J(o,s,K,O,t,d){const u=r("BaseInput"),h=r("tiptap"),_=r("Notification");return a(),n("form",{onSubmit:s[2]||(s[2]=V((...i)=>d.update&&d.update(...i),["prevent"])),class:"space-y-8 divide-y divide-gray-200 my-10 mb-10 max-w-7xl mx-auto px-6"},[e("div",j,[t.post?(a(),n("div",I,[e("div",T,[e("div",U,[p(u,{labelClass:"block text-sm font-medium text-gray-700 dark:text-white",placeHolder:"Wite a nice title",class:"mt-1 shadow-sm focus:ring-sky-500 focus:border-sky-500 block w-full sm:text-sm border-gray-300 rounded-md",label:"Title",type:"text",modelValue:t.post.title,"onUpdate:modelValue":s[0]||(s[0]=i=>t.post.title=i)},null,8,["modelValue"])]),e("div",z,[A,e("div",S,[p(h,{modelValue:t.post.body,"onUpdate:modelValue":s[1]||(s[1]=i=>t.post.body=i)},null,8,["modelValue"])])])])])):(a(),n("div",E,"loading...."))]),e("div",F,[e("div",H,[t.errors?(a(!0),n(b,{key:0},x(t.errors,(i,f)=>(a(),n("p",{class:"mt-1 text-sm text-red-500 italic",key:f},m(i[0]),1))),128)):l("",!0)]),e("div",M,[e("button",{type:"submit",disabled:t.isLoading,class:v([{"cursor-not-allowed ":t.isLoading},"primary-btn"])},[t.isLoading?(a(),n("svg",D,G)):l("",!0),k(" "+m(t.isLoading?"Updating In":"Update"),1)],10,Y),t.submitted?(a(),w(_,{key:0,body:"Your post had been edited",footer:"You can view it now."})):l("",!0)])])],32)}var Z=N(C,[["render",J]]);export{Z as default};
