<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50" id="html">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Andi Liang's Blog</title>
  </head>
  <body class="h-full dark:bg-gray-800">
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>


<!--    <script >-->
<!--        //vue 3 reactive-->
<!--        const targetMap = new WeakMap();-->
<!--        function track(target,key) {-->

<!--            // We need to make sure this effect is being tracked.-->
<!--            let depsMap = targetMap.get(target) // Get the current depsMap for this target-->
<!--            if (!depsMap) {-->
<!--                // There is no map.-->
<!--                targetMap.set(target, (depsMap = new Map())) // Create one-->
<!--            }-->
<!--            let dep = depsMap.get(key) // Get the current dependencies (effects) that need to be run when this is set-->
<!--            if (!dep) {-->
<!--                // There is no dependencies (effects)-->
<!--                depsMap.set(key, (dep = new Set())) // Create a new Set-->
<!--            }-->
<!--            dep.add(effect) // Add effect to dependency map-->
<!--        }-->

<!--        function trigger(target,key,) {-->
<!--            const depsMap = targetMap.get(target) // Does this object have any properties that have dependencies (effects)-->
<!--            if (!depsMap) {-->
<!--                return-->
<!--            }-->
<!--            let dep = depsMap.get(key) // If there are dependencies (effects) associated with this-->
<!--            if (dep) {-->
<!--                dep.forEach(effect => effect())-->
<!--            }-->
<!--        }-->

<!--        function reactive(data){-->
<!--            return new Proxy(data,{-->
<!--                get(target, p, receiver) {-->
<!--                    let res = Reflect.get(target, p, receiver)-->
<!--                    track(target, p)-->
<!--                    return res;-->
<!--                },-->
<!--                set(target, p, value, receiver) {-->
<!--                    let oldValue = target[p];-->
<!--                    let res = Reflect.set(target,p, value, receiver);-->
<!--                    if(res && value !== oldValue){-->
<!--                        trigger(target, p)-->
<!--                    }-->
<!--                    return res;-->
<!--                }-->
<!--            })-->
<!--        }-->

<!--        let product = reactive({price:5,quantity:2});-->
<!--        let total = 0-->
<!--        let effect = () => {-->
<!--            total = product.price * product.quantity-->
<!--        }-->

<!--        effect();-->
<!--        console.log(total);-->
<!--        product.price = 10-->
<!--        console.log(total);-->

<!--    </script>-->
  </body>
</html>
